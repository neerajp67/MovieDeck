<section class="content-section">
  <div class="content-header">
    <h2>Trending</h2>
    <mat-button-toggle-group [(ngModel)]="activeTimeWindow" (ngModelChange)="loadTrendingMovies()"
      aria-label="Time window selection">
      <mat-button-toggle value="day">Today</mat-button-toggle>
      <mat-button-toggle value="week">This Week</mat-button-toggle>
    </mat-button-toggle-group>
  </div>

  @if (isLoading()) {
  <div class="info-message">
    <mat-spinner diameter="50"></mat-spinner>
  </div>
  }

  @if (errorMessage()) {
  <div class="info-message error-message">
    <p>{{ errorMessage() }}</p>
  </div>
  }

  @if (!isLoading && !errorMessage && trendingMovies.length === 0) {
  <div class="info-message">
    <p>No trending movies found for {{ activeTimeWindow() === 'day' ? 'today' : 'this week' }}.</p>
  </div>
  }

  @if (!isLoading() && trendingMovies().length > 0) {
  <app-horizontal-scroll>
    @for (movie of trendingMovies(); track $index) {
    <app-media-card [media]="getMedia(movie)"></app-media-card>
    }
  </app-horizontal-scroll>
  }
</section>