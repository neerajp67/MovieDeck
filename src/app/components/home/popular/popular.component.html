<section class="content-section">
  <div class="content-header">
    <h2>Popular</h2>
    <mat-button-toggle-group [(ngModel)]="selectedCategory" (ngModelChange)="loadPopular()"
      aria-label="popular category selection">
      <mat-button-toggle value="movie">Movie</mat-button-toggle>
      <mat-button-toggle value="tv">TV Show</mat-button-toggle>
    </mat-button-toggle-group>
  </div>

  @if (isLoading()) {
  <div class="info-message">
    <mat-spinner diameter="50"></mat-spinner>
  </div>
  }

  @if (errorMessage()) {
  <div class="info-message error-message">
    <p>{{ errorMessage() }}</p>
  </div>
  }

  @if (!isLoading() && !errorMessage() && popularMedia().length === 0) {
  <div class="info-message">
    <p>No popular media found for {{ selectedCategory() === 'movie' ? 'movie' : 'tv' }}.</p>
  </div>
  }

  @if (!isLoading() && popularMedia().length > 0) {
  <app-horizontal-scroll>
    @for (media of popularMedia(); track $index) {
    <app-media-card [media]="getMedia(media)"></app-media-card>
    }
  </app-horizontal-scroll>
  }
</section>