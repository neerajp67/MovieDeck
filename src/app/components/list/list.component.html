<div class="list-container">
    <div class="content-header">
        @if (selectedMediaType !== 'person') {
        <mat-button-toggle-group [value]="selectedFilter" (change)="selectFilter($event.value)"
            aria-label="Select filter type">
            <mat-button-toggle value="bollywood">Bollywood</mat-button-toggle>
            <mat-button-toggle value="hollywood">Hollywood</mat-button-toggle>
        </mat-button-toggle-group>
        }
    </div>

    @if (isLoading) {
    <div class="info-message">
        <mat-spinner diameter="50"></mat-spinner>
    </div>
    }

    @if (errorMessage) {
    <div class="info-message error-message">
        <p>{{ errorMessage }}</p>
    </div>
    }

    @if (!isLoading && !errorMessage && mediaItems.length === 0) {
    <div class="info-message">
        <p>No {{ selectedFilter }} {{ selectedMediaType }} found.</p>
    </div>
    }

    @if (!isLoading && mediaItems.length > 0) {
    <div class="media-grid">
        @for (item of mediaItems; track $index) {
        <mat-card class="media-card-item" [ngClass]="{'person-card': selectedMediaType === 'person'}"
            (click)="navigateToDetails(item)">
            <img [src]="getProfileImageUrl(item)" [alt]="item.title || item.name" class="media-card-background-image"
                (error)="selectedMediaType === 'person' ? item.profile_path = null : item.poster_path = null">
            <div class="media-card-overlay"></div>
            <mat-card-content class="media-card-content">
                <mat-card-title class="media-card-title">{{ item?.title || item?.name }}</mat-card-title>
                @if (selectedMediaType !== 'person' && (item.release_date || item.first_air_date)) {
                <mat-card-subtitle class="media-card-subtitle">
                    {{ item.release_date || item.first_air_date | date:'MMM y' }}
                    @if(item.vote_average) {
                    | {{ item.vote_average | number: '1.1-1' }}
                    }
                </mat-card-subtitle>
                } @else {
                <mat-card-subtitle class="media-card-subtitle">
                    {{ item.known_for_department }}
                </mat-card-subtitle>
                }
            </mat-card-content>
        </mat-card>
        }
    </div>
    }

    @if (!isLoading && totalPages > 1) {
    <div class="pagination-controls scroll-wrapper">
        <button mat-icon-button class="scroll-arrow left-arrow" (click)="goToPage(currentPage - 1)"
            [disabled]="currentPage === 1" aria-label="Previous page">
            <mat-icon>chevron_left</mat-icon>
        </button>
        <span>Page {{ currentPage }} of {{ totalPages }} ({{ totalResults }} results)</span>
        <button mat-icon-button class="scroll-arrow right-arrow" (click)="goToPage(currentPage + 1)"
            [disabled]="currentPage === totalPages" aria-label="Next page">
            <mat-icon>chevron_right</mat-icon>
        </button>
    </div>
    }
</div>