<div class="trailer-modal-container">
  <div class="modal-header">
    <h2 class="modal-title">{{ data.title }}</h2>
    <button mat-icon-button (click)="closeDialog()" aria-label="Close dialog">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <div class="modal-body">
    @if (data.isLoading) {
    <div class="loading-overlay">
      @if (data.posterPath) {
      <img [src]="data.posterPath" alt="Movie Poster" class="loading-poster-bg">
      }
      <div class="loading-gradient-overlay"></div>
      <mat-spinner diameter="50"></mat-spinner>
      <p>Loading trailer...</p>
    </div>
    }

    @if (data.errorMessage && !data.isLoading) {
    <div class="error-message-overlay">
      <p>{{ data.errorMessage }}</p>
      <button mat-button (click)="closeDialog()">Close</button>
    </div>
    }

    @if (videoUrl() && !data.isLoading && !data.errorMessage) {
    <div class="video-player-wrapper">
      <iframe [title]="data.title" [src]="videoUrl()"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
        allowfullscreen class="youtube-player">
      </iframe>
    </div>
    }
  </div>
</div>